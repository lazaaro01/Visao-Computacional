<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Demonstração interativa de visão computacional com HTML, CSS e JS para alunos e curiosos em tecnologia.">
  <title>Tecnologia que Te Enxerga</title>

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: #000;
      color: #fff;
      text-align: center;
      overflow-x: hidden;
      position: relative;
    }

    #networkCanvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
      width: 100%;
      height: 100%;
    }

    header, footer, section {
      position: relative;
      z-index: 1;
    }

    header {
      padding: 3rem 1rem;
      background-color: rgba(0, 0, 0, 0.4);
    }

    h1 {
      font-size: 2.5rem;
      color: #00ffc8;
      animation: glow 2s ease-in-out infinite;
      font-weight: 700;
      min-height: 3rem;
    }

    @keyframes glow {
      0%, 100% { text-shadow: 0 0 5px #00ffc8, 0 0 10px #00ffc8; }
      50% { text-shadow: 0 0 20px #00ffc8, 0 0 30px #00ffc8; }
    }

    .typing-text {
      font-size: 1.2rem;
      margin: 1rem auto;
      max-width: 600px;
      min-height: 2.5rem;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #00ffc8;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    button {
      padding: 1rem 2rem;
      font-size: 1.1rem;
      background-color: #00ffc8;
      border: none;
      color: #000;
      cursor: pointer;
      border-radius: 8px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      animation: pulse 2s infinite;
      font-weight: 700;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #00ffc8;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 5px #00ffc8; }
      50% { box-shadow: 0 0 20px #00ffc8; }
    }

    #cameraSection {
      position: relative;
      margin: 2rem auto;
      width: 80%;
      max-width: 640px;
      border: 3px solid #00ffc8;
      border-radius: 10px;
      overflow: hidden;
    }

    video {
      width: 100%;
      height: auto;
    }

    #faceBox {
      position: absolute;
      border: 3px solid #ff00ff;
      width: 100px;
      height: 100px;
      pointer-events: none;
      border-radius: 10px;
      transition: top 0.1s, left 0.1s;
    }

    #infoBubble {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      padding: 0.7rem 1rem;
      border-radius: 8px;
      color: #fff;
      animation: bubbleFade 3s infinite;
    }

    .info-note {
      font-size: 0.9rem;
      color: #ccc;
      margin-top: 1rem;
    }

    @keyframes bubbleFade {
      0% { opacity: 1; }
      50% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    footer {
      padding: 2rem 1rem;
      background-color: #111;
      font-size: 1rem;
    }

    .hidden {
      display: none;
    }

    .error-msg {
      color: red;
      margin-top: 1rem;
      font-weight: bold;
    }

    .activated-text {
      font-size: 1.3rem;
      color: #00ffc8;
      font-weight: bold;
      animation: glow 2s ease-in-out infinite;
      margin-top: 1rem;
    }

    .activated-text:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #00ffc8;
    }

    #photo {
      margin-top: 20px;
      max-width: 100%;
      height: auto;
      border: 2px solid #00ffc8;
      border-radius: 10px;
    }
  </style>
</head>
<body>

  <canvas id="networkCanvas"></canvas>

  <header>
    <h1 id="typingTitle"></h1>
    <p id="typingPara" class="typing-text"></p>
    <button id="startBtn">Ativar Visão Computacional</button>
  </header>

  <section id="cameraSection" class="hidden">
    <video id="video" autoplay></video>
    <div id="faceBox"></div>
    <div id="infoBubble">Você piscou! A tecnologia viu!</div>
    <p class="info-note">Simulação interativa – mova o mouse sobre o vídeo para ver a tecnologia "reagir".</p>
    <button id="takePhotoBtn">Tirar Foto</button>
    <img id="photo" class="hidden" />
  </section>

  <footer>
    <p><strong>Quer aprender a criar isso?</strong></p>
    <p>No curso de <strong>Análise e Desenvolvimento de Sistemas</strong>, você aprende a programar soluções como esta!</p>
    <p>&copy; Feito por Gustavo Martins & Lázaro Vasconcelos</p>
  </footer>

  <script>
    // Efeito de digitação
    function typeText(elementId, text, delay = 80, callback = null) {
      const el = document.getElementById(elementId);
      let i = 0;
      function typing() {
        if (i < text.length) {
          el.textContent += text.charAt(i);
          i++;
          setTimeout(typing, delay);
        } else if (callback) {
          callback();
        }
      }
      typing();
    }

    window.addEventListener('DOMContentLoaded', () => {
      typeText('typingTitle', 'Tecnologia que Te Enxerga', 100, () => {
        typeText('typingPara', 'A tecnologia que enxerga o mundo está ao seu alcance!', 50);
      });
    });

    // Câmera e interações
    const startBtn = document.getElementById('startBtn');
    const cameraSection = document.getElementById('cameraSection');
    const video = document.getElementById('video');
    const faceBox = document.getElementById('faceBox');
    const takePhotoBtn = document.getElementById('takePhotoBtn');
    const photoElement = document.getElementById('photo');
    let drawActive = false;

    startBtn.addEventListener('click', () => {
      cameraSection.classList.remove('hidden');

      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => video.srcObject = stream)
        .catch(err => {
          console.error(err);
          const errorMsg = document.createElement('p');
          errorMsg.textContent = 'Erro ao acessar a câmera: ' + err.message;
          errorMsg.classList.add('error-msg');
          cameraSection.appendChild(errorMsg);
        });

      const confirmedText = document.createElement('p');
      confirmedText.textContent = 'Visão Computacional Ativada!';
      confirmedText.classList.add('activated-text');
      startBtn.replaceWith(confirmedText);

      if (!drawActive) {
        initCanvas();
        drawCircuit();
        drawActive = true;
      }
    });

    takePhotoBtn.addEventListener('click', () => {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const dataURL = canvas.toDataURL();
      photoElement.src = dataURL;
      photoElement.classList.remove('hidden');
    });

    cameraSection.addEventListener('mousemove', (e) => {
      const rect = cameraSection.getBoundingClientRect();
      const x = e.clientX - rect.left - 50;
      const y = e.clientY - rect.top - 50;
      faceBox.style.left = `${x}px`;
      faceBox.style.top = `${y}px`;
    });

    const canvas = document.getElementById('networkCanvas');
    const ctx = canvas.getContext('2d');
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    const lines = [];
    const dataDots = [];
    let mouse = { x: width / 2, y: height / 2 };

    function initCanvas() {
      for (let i = 0; i < 100; i++) {
        const y = Math.floor(Math.random() * height / 20) * 20;
        const length = 80 + Math.random() * 200;
        lines.push({
          x: -Math.random() * width,
          y,
          speed: 0.5 + Math.random() * 1.5,
          length,
          glow: Math.random()
        });
      }

      for (let i = 0; i < 60; i++) {
        dataDots.push({
          x: Math.random() * width,
          y: Math.floor(Math.random() * height / 20) * 20,
          speed: 2 + Math.random() * 2,
          radius: 2 + Math.random() * 2
        });
      }
    }

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    function drawCircuit() {
      ctx.clearRect(0, 0, width, height);

      for (let line of lines) {
        ctx.beginPath();
        ctx.moveTo(line.x, line.y);
        ctx.lineTo(line.x + line.length, line.y);
        ctx.lineWidth = 2;
        ctx.strokeStyle = `rgba(0,255,200,${line.glow})`;
        ctx.stroke();
        line.x += line.speed;
        if (line.x > width) {
          line.x = -line.length;
          line.y = Math.floor(Math.random() * height / 20) * 20;
          line.glow = Math.random();
        }
      }

      for (let dot of dataDots) {
        ctx.beginPath();
        ctx.arc(dot.x, dot.y, dot.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0,255,200,1)`;
        ctx.fill();
        dot.x += dot.speed;
        if (dot.x > width) {
          dot.x = 0;
        }
      }

      requestAnimationFrame(drawCircuit);
    }
  </script>
</body>
</html>
